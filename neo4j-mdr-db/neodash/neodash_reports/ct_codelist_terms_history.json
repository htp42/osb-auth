{
  "title": "Codelist / Terms history",
  "version": "2.4",
  "settings": {
    "pagenumber": 0,
    "editable": true,
    "fullscreenEnabled": false,
    "parameters": {
      "neodash_selected_date": {},
      "neodash_ctcodelistattributesvalue_name": "",
      "neodash_ctcodelistattributesvalue_name_display": "",
      "neodash_subval": [],
      "neodash_subval_display": [],
      "neodash_": [],
      "neodash_cl_id": "",
      "neodash_pck_date": ""
    },
    "theme": "light",
    "disableRowLimiting": true
  },
  "pages": [
    {
      "title": "ReadMe",
      "reports": [
        {
          "id": "705f65b8-21d4-47db-a71a-7867c32cb06b",
          "title": "Guide",
          "query": "This NeoDash report allow you to browse the **Controlled Terminology** with both the CDISC and the Sponsor Codelists / Terms: here we display the evolution of each Codelist from Package to Package.\n\n",
          "width": 24,
          "height": 4,
          "x": 0,
          "y": 0,
          "type": "text",
          "selection": {},
          "settings": {},
          "schema": []
        }
      ]
    },
    {
      "title": "Codelist and Terms",
      "reports": [
        {
          "id": "1009ff47-1b86-4141-be6d-be5e794bdb83",
          "title": "Overview at Date : $neodash_pck_date",
          "query": "MATCH\n  (n1:CTCodelistAttributesValue)<-[:HAS_VERSION]-\n  (n2:CTCodelistAttributesRoot)<-[r2]-\n  (n3:CTCodelistRoot),\n  (n3)<-[r11:HAS_CODELIST]-\n  (catalogue:CTCatalogue)\nMATCH\n  (n3:CTCodelistRoot)<-[r5:HAS_SELECTED_CODELIST]-\n  (ct_context:CTTermContext)-[r5_1:HAS_SELECTED_TERM]->\n  (n6:CTTermRoot)-[r6:HAS_ATTRIBUTES_ROOT]->\n  (n7:CTTermAttributesRoot)-[r7:HAS_VERSION]->\n  (n8:CTTermAttributesValue)\nWHERE\n  n1.name = $neodash_ctcodelistattributesvalue_name   \nMATCH (n1)<-[r1:HAS_VERSION]-\n  (n2:CTCodelistAttributesRoot)<-[r2]-(n3:CTCodelistRoot)<-[r5:HAS_SELECTED_CODELIST]-\n  (ct_context:CTTermContext)-[r5_1:HAS_SELECTED_TERM]->\n  (n6:CTTermRoot)-[r6:HAS_ATTRIBUTES_ROOT]->\n  (n7:CTTermAttributesRoot)-[r7:HAS_VERSION]->\n  (n8:CTTermAttributesValue)\nMATCH q=(n6)<-[r8:HAS_TERM_ROOT]-(subm_val:CTCodelistTerm)\nWITH DISTINCT n1,n2,n3,ct_context,n6,n7,n8,subm_val,r1,r2,r5,r5_1,r6,r7,r8 where r1.version=$neodash_cl_id\nreturn *",
          "width": 11,
          "height": 4,
          "x": 5,
          "y": 0,
          "type": "graph",
          "selection": {
            "CTTermContext": "(label)",
            "CTCodelistAttributesValue": "name",
            "CTCodelistAttributesRoot": "(label)",
            "CTCodelistRoot": "uid",
            "CTTermRoot": "uid",
            "CTTermAttributesRoot": "(label)",
            "CTTermAttributesValue": "preferred_term",
            "CTCodelistTerm": "submission_value"
          },
          "settings": {
            "layout": "force-directed",
            "fullscreenEnabled": true,
            "refreshButtonEnabled": true
          },
          "schema": [
            [
              "CTTermContext"
            ],
            [
              "CTCodelistAttributesValue",
              "preferred_term",
              "concept_id",
              "synonyms",
              "name",
              "definition",
              "extensible",
              "submission_value"
            ],
            [
              "CTCodelistAttributesRoot"
            ],
            [
              "CTCodelistRoot",
              "uid"
            ],
            [
              "CTTermRoot",
              "uid"
            ],
            [
              "CTTermAttributesRoot"
            ],
            [
              "CTTermAttributesValue",
              "preferred_term",
              "concept_id",
              "synonyms",
              "definition"
            ],
            [
              "HAS_VERSION",
              "version",
              "start_date",
              "user_initials",
              "status",
              "end_date"
            ],
            [
              "HAS_ATTRIBUTES_ROOT"
            ],
            [
              "HAS_SELECTED_CODELIST"
            ],
            [
              "HAS_SELECTED_TERM"
            ],
            [
              "HAS_TERM_ROOT"
            ],
            [
              "CTCodelistTerm",
              "submission_value"
            ]
          ]
        },
        {
          "id": "e1eaf548-16e4-4f77-a358-9bc7ea61e0b8",
          "title": "History of terms in Codelist",
          "query": "CALL\n  apoc.when(\n    size($neodash_subval) > 0,\n    \"MATCH\n  (n1:CTCodelistAttributesValue)<-[r1:HAS_VERSION]-\n  (n2:CTCodelistAttributesRoot)<-[r2]-\n  (n3:CTCodelistRoot)<-[r5:HAS_SELECTED_CODELIST]-\n  (ct_context:CTTermContext)-[r5_1:HAS_SELECTED_TERM]->\n  (n6:CTTermRoot)-[r6:HAS_ATTRIBUTES_ROOT]->\n  (n7:CTTermAttributesRoot)-[r7:HAS_VERSION]->(n8:CTTermAttributesValue),\n  (n6)<-[:HAS_TERM_ROOT]-(subm_val:CTCodelistTerm)\nWITH DISTINCT n1,r1,n2,r2,n3,r5,n6,r6,n7,r7,n8,subm_val\nWHERE n1.name=$neodash_ctcodelistattributesvalue_name and subm_val.submission_value in $neodash_subval\nwith subm_val.submission_value as term, n6.concept_id as ccode, r7.version as version, properties(n8) as map1,apoc.map.fromValues(['submission_value',subm_val.submission_value,'version',r7.version,'start_date',r7.start_date,'retire_date',r5.end_date,'end_date',r7.end_date]) as map2 order by n8.submission_value,n8.concept_id, r7.version\nwith term, ccode, CASE WHEN 'synonyms' in keys(map1) THEN apoc.map.setValues(map1,['synonyms',apoc.text.join(map1['synonyms'],';')]) ELSE map1 END as map1, map2\nwith term, ccode, collect(apoc.map.merge(map1, map2)) as terms \n with term, ccode, size(terms) as n, terms\n with term, ccode, CASE WHEN n>1 THEN apoc.coll.pairs(terms)  ELSE [[null,terms[0]]] end as terms\n with term, ccode, CASE when size(terms)>1 THEN  apoc.coll.insert(terms[0..size(terms)-1], 0, [null,terms[0][0]]) ELSe terms END as terms\nWITH term,  ccode, terms, [t in terms | CASE WHEN t[0] is not null and not t[0]['definition']=t[1]['definition'] THEN \n    \\\"<p style=\\'color:green;\\'>V\\\" +t[0]['version']+ \\\": \\\" + t[0]['definition'] + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": \\\" + t[1]['definition'] +\\\"</p>\\\" ELSE\n    t[1]['definition'] end] as definition,\n    [t in terms | t[1]['start_date']] as start_date,\n    [t in terms | coalesce(t[1]['end_date'],date())] as end_date,\n    [t in terms | CASE WHEN t[0] is not null and not t[0]['concept_id']=t[1]['concept_id'] THEN \n    \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\":\\\" + t[0]['concept_id'] + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\":  \\\" + t[1]['concept_id'] +\\\"</p>\\\" ELSE\n    t[1]['concept_id'] end] as concept_id,\n    [t in terms | CASE WHEN t[0] is not null and not t[0]['retire_date']=t[1]['retire_date'] THEN \n    \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\": \\\" + apoc.temporal.format(t[0]['retire_date'],'YYYY-MM-dd') + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": \\\" + apoc.temporal.format(t[1]['retire_date'],'YYYY-MM-dd') +\\\"</p>\\\" ELSE CASE WHEN t[1]['retire_date'] is not null THEN \n    apoc.temporal.format(t[1]['retire_date'],'YYYY-MM-dd') ELSE t[1]['retire_date'] END end] as retire_date,\n        [t in terms | CASE WHEN t[0] is not null and not t[0]['preferred_term']=t[1]['preferred_term'] THEN \n    \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\": \\\" + t[0]['preferred_term'] + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": \\\" + t[1]['preferred_term'] +\\\"</p>\\\" ELSE\n    t[1]['preferred_term'] end] as preferred_term,\n        [t in terms | CASE WHEN t[0] is not null and not t[0]['submission_value']=t[1]['submission_value'] THEN \n    \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\": \\\" + t[0]['submission_value'] + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": \\\" + t[1]['submission_value'] +\\\"</p>\\\" ELSE\n    t[1]['submission_value'] end] as submission_value,\n\n    [t in terms | CASE WHEN t[0] is not null and 'synonyms' in keys(t[0]) and 'synonyms' in keys(t[1]) and not t[0]['synonyms']=t[1]['synonyms']  \n    THEN  \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\": \\\" + t[0]['synonyms'] + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": \\\"+ t[1]['synonyms'] + \\\"</p>\\\" \n    ELSE \n      CASE WHEN t[0] is not null and not 'synonyms' in keys(t[0]) and 'synonyms' in keys(t[1]) THEN  \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\": </p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": \\\" + t[1]['synonyms'] +\\\"</p>\\\" \n          ELSE \n          CASE WHEN t[0] is not null and not 'synonyms' in keys(t[1]) and 'synonyms' in keys(t[0]) THEN\n     \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\": \\\" + t[0]['synonyms'] + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": </p>\\\" ELSE\n    t[1]['synonyms'] end end end] as synonyms,\n\n    [t in terms | t[1]['version'] ] as version\n\nwith term, ccode, concept_id,definition, submission_value, preferred_term, synonyms, start_date, end_date, retire_date, version, range(0,size(terms)-1,1) AS coll_size\nunwind coll_size as idx\nwith distinct term, ccode,definition[idx] as definition,\nconcept_id[idx] as concept_id,\nsubmission_value[idx] as submission_value,\npreferred_term[idx] as preferred_term,\nsynonyms[idx] as synonyms, \nstart_date[idx] as start_date, \nend_date[idx] as end_date, \nretire_date[idx] as retire_date, \nversion[idx] as version\nWITH term, ccode, definition,concept_id,submission_value,preferred_term, synonyms,start_date, end_date, retire_date,version\nCALL apoc.create.vNode(['Term'],\n  {start_date:apoc.temporal.format(start_date,'YYYY-MM-dd'),\n  end_date:apoc.temporal.format(end_date,'YYYY-MM-dd'),\n  retire_date:retire_date,\n  concept_id: concept_id,\n  submission_value:submission_value,\n  definition:definition,\n  preferred_term:preferred_term,\n  synonyms:synonyms,\n  version:version }) YIELD node as node\n  WITH term, ccode, collect(node) as nodes\n  WITH term, ccode, CASE WHEN size(nodes)>1 THEN apoc.coll.pairs(nodes) ELSE [nodes,null] END as nodes\n  UNWIND nodes as node_pair\n  with term,ccode,node_pair[0] as prev_node, node_pair[1] as next_node\n  WITH term,ccode,prev_node, next_node,\n  CASE WHEN next_node is not null THEN apoc.create.vRelationship(prev_node, 'NEXT', {}, next_node) END as rel \n  return term,ccode,prev_node as terms,rel\",\n   \" MATCH\n  (n1:CTCodelistAttributesValue)<-[r1:HAS_VERSION]-\n  (n2:CTCodelistAttributesRoot)<-[r2]-\n  (n3:CTCodelistRoot)<-[r5:HAS_SELECTED_CODELIST]-\n  (ct_context:CTTermContext)-[r5_1:HAS_SELECTED_TERM]->\n  (n6:CTTermRoot)-[r6:HAS_ATTRIBUTES_ROOT]->\n  (n7:CTTermAttributesRoot)-[r7:HAS_VERSION]->(n8:CTTermAttributesValue),\n  (n6)<-[:HAS_TERM_ROOT]-(subm_val:CTCodelistTerm)\nWITH DISTINCT n1,r1,n2,r2,n3,r5,n6,r6,n7,r7,n8,subm_val\nWHERE n1.name=$neodash_ctcodelistattributesvalue_name \nwith subm_val.submission_value as term, n6.concept_id as ccode, r7.version as version, properties(n8) as map1,apoc.map.fromValues(['submission_value',subm_val.submission_value,'version',r7.version,'start_date',r7.start_date,'retire_date',r5.end_date,'end_date',r7.end_date]) as map2 order by n8.submission_value,n8.concept_id, r7.version\nwith term, ccode, CASE WHEN 'synonyms' in keys(map1) THEN apoc.map.setValues(map1,['synonyms',apoc.text.join(map1['synonyms'],';')]) ELSE map1 END as map1, map2\nwith term, ccode, collect(apoc.map.merge(map1, map2)) as terms \n with term, ccode, size(terms) as n, terms\n with term, ccode, CASE WHEN n>1 THEN apoc.coll.pairs(terms)  ELSE [[null,terms[0]]] end as terms\n with term, ccode, CASE when size(terms)>1 THEN  apoc.coll.insert(terms[0..size(terms)-1], 0, [null,terms[0][0]]) ELSe terms END as terms\nWITH term,  ccode, terms, [t in terms | CASE WHEN t[0] is not null and not t[0]['definition']=t[1]['definition'] THEN \n    \\\"<p style=\\'color:green;\\'>V\\\" +t[0]['version']+ \\\": \\\" + t[0]['definition'] + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": \\\" + t[1]['definition'] +\\\"</p>\\\" ELSE\n    t[1]['definition'] end] as definition,\n    [t in terms | t[1]['start_date']] as start_date,\n    [t in terms | coalesce(t[1]['end_date'],date())] as end_date,\n    [t in terms | CASE WHEN t[0] is not null and not t[0]['concept_id']=t[1]['concept_id'] THEN \n    \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\":\\\" + t[0]['concept_id'] + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\":  \\\" + t[1]['concept_id'] +\\\"</p>\\\" ELSE\n    t[1]['concept_id'] end] as concept_id,\n    [t in terms | CASE WHEN t[0] is not null and not t[0]['retire_date']=t[1]['retire_date'] THEN \n    \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\": \\\" + apoc.temporal.format(t[0]['retire_date'],'YYYY-MM-dd') + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": \\\" + apoc.temporal.format(t[1]['retire_date'],'YYYY-MM-dd') +\\\"</p>\\\" ELSE CASE WHEN t[1]['retire_date'] is not null THEN \n    apoc.temporal.format(t[1]['retire_date'],'YYYY-MM-dd') ELSE t[1]['retire_date'] END end] as retire_date,\n        [t in terms | CASE WHEN t[0] is not null and not t[0]['preferred_term']=t[1]['preferred_term'] THEN \n    \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\": \\\" + t[0]['preferred_term'] + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": \\\" + t[1]['preferred_term'] +\\\"</p>\\\" ELSE\n    t[1]['preferred_term'] end] as preferred_term,\n        [t in terms | CASE WHEN t[0] is not null and not t[0]['submission_value']=t[1]['submission_value'] THEN \n    \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\": \\\" + t[0]['submission_value'] + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": \\\" + t[1]['submission_value'] +\\\"</p>\\\" ELSE\n    t[1]['submission_value'] end] as submission_value,\n\n    [t in terms | CASE WHEN t[0] is not null and 'synonyms' in keys(t[0]) and 'synonyms' in keys(t[1]) and not t[0]['synonyms']=t[1]['synonyms']  \n    THEN  \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\": \\\" + t[0]['synonyms'] + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": \\\"+ t[1]['synonyms'] + \\\"</p>\\\" \n    ELSE \n      CASE WHEN t[0] is not null and not 'synonyms' in keys(t[0]) and 'synonyms' in keys(t[1]) THEN  \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\": </p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": \\\" + t[1]['synonyms'] +\\\"</p>\\\" \n          ELSE \n          CASE WHEN t[0] is not null and not 'synonyms' in keys(t[1]) and 'synonyms' in keys(t[0]) THEN\n     \\\"<p style=\\'color:green;\\'>V\\\"+t[0]['version']+\\\": \\\" + t[0]['synonyms'] + \\\"</p><p style=\\'color:red;\\'>V\\\"+t[1]['version']+\\\": </p>\\\" ELSE\n    t[1]['synonyms'] end end end] as synonyms,\n\n    [t in terms | t[1]['version'] ] as version\n\nwith term, ccode, concept_id,definition, submission_value, preferred_term, synonyms, start_date, end_date, retire_date, version, range(0,size(terms)-1,1) AS coll_size\nunwind coll_size as idx\nwith distinct term, ccode,definition[idx] as definition,\nconcept_id[idx] as concept_id,\nsubmission_value[idx] as submission_value,\npreferred_term[idx] as preferred_term,\nsynonyms[idx] as synonyms, \nstart_date[idx] as start_date, \nend_date[idx] as end_date, \nretire_date[idx] as retire_date, \nversion[idx] as version\nWITH term, ccode, definition,concept_id,submission_value,preferred_term, synonyms,start_date, end_date, retire_date,version\nCALL apoc.create.vNode(['Term'],\n  {start_date:apoc.temporal.format(start_date,'YYYY-MM-dd'),\n  end_date:apoc.temporal.format(end_date,'YYYY-MM-dd'),\n  retire_date:retire_date,\n  concept_id: concept_id,\n  submission_value:submission_value,\n  definition:definition,\n  preferred_term:preferred_term,\n  synonyms:synonyms,\n  version:version }) YIELD node as node\n  WITH term, ccode, collect(node) as nodes\n  WITH term, ccode, CASE WHEN size(nodes)>1 THEN apoc.coll.pairs(nodes) ELSE [nodes,null] END as nodes\n  UNWIND nodes as node_pair\n  with term,ccode,node_pair[0] as prev_node, node_pair[1] as next_node\n  WITH term,ccode,prev_node, next_node,\n  CASE WHEN next_node is not null THEN apoc.create.vRelationship(prev_node, 'NEXT', {}, next_node) END as rel \n  return term,ccode,prev_node as terms,rel\",\n    {\n      neodash_ctcodelistattributesvalue_name:\n        $neodash_ctcodelistattributesvalue_name,\n      neodash_subval: $neodash_subval\n    }\n  )\n  YIELD value\nRETURN value.term AS term, value.terms AS terms, value.rel AS rel",
          "width": 23,
          "height": 4,
          "x": 0,
          "y": 10,
          "type": "gantt",
          "selection": {
            "Term": "(label)"
          },
          "settings": {
            "startDateProperty": "start_date",
            "endDateProperty": "end_date",
            "nameProperty": "submission_value",
            "viewMode": "Year",
            "orderProperty": "term",
            "fullscreenEnabled": true
          },
          "schema": [
            [
              "Term",
              "end_date",
              "preferred_term",
              "concept_id",
              "synonyms",
              "definition",
              "retire_date",
              "version",
              "submission_value",
              "start_date"
            ],
            [
              "NEXT"
            ]
          ]
        },
        {
          "id": "9175edb5-b4f8-4ed7-b325-e62dbeddb8c7",
          "title": "Terms History for Codelist - $neodash_ctcodelistattributesvalue_name",
          "query": "MATCH\n  (n1:CTCodelistAttributesValue)<-[r1:HAS_VERSION]-\n  (n2:CTCodelistAttributesRoot)<-[r2]-\n  (n3:CTCodelistRoot)<-[r5:HAS_SELECTED_CODELIST]-\n  (ct_context:CTTermContext)-[r5_1:HAS_SELECTED_TERM]->\n  (n6:CTTermRoot)-[r6:HAS_ATTRIBUTES_ROOT]->\n  (n7:CTTermAttributesRoot)-[r7:HAS_VERSION]->\n  (n8:CTTermAttributesValue),\n  (n6)<-[:CONTAINS_TERM]-(lib_term:Library),\n  (n3)<-[:CONTAINS_CODELIST]-(lib_cl:Library),\n  (n6)<-[:HAS_TERM_ROOT]-(subm_val:CTCodelistTerm)\nWITH DISTINCT n1,r1,n2,r2,n3,r5,n6,r6,n7,r7,n8,lib_term,lib_cl,subm_val\nWHERE n1.name=$neodash_ctcodelistattributesvalue_name \nWITH DISTINCT n1.name AS CodelistName, \nlib_cl.name as CodelistOwner,\nn3.uid AS Codelist, \nsubm_val.submission_value AS SubVal,\nn8.concept_id as `Term C-code`,\nlib_term.name as TermOwner,\ncase when r7.start_date is not null then apoc.temporal.format(r7.start_date,\"YYYY-MM-dd\")  else '' end as start_date,\ncase when r5.end_date is not null then apoc.temporal.format(r5.end_date,\"YYYY-MM-dd\")  else '' end as retire_date\nWITH CodelistName, CodelistOwner, Codelist, SubVal,  TermOwner,`Term C-code`,\nsize(apoc.coll.toSet(collect(start_date)))-1 as numChange, \napoc.coll.sort(apoc.coll.toSet(collect(start_date))) as startDate,\nretire_date\nwith distinct Codelist, \nCodelistName, \nCodelistOwner,\n`Term C-code`,\nSubVal,\nTermOwner,\nnumChange, \nstartDate, \nretire_date order by Codelist, CodelistName, SubVal\nwith Codelist,\nCodelistOwner,\nCodelistName as`Codelist Name`,\n`Term C-code`,\nSubVal as `Submission Value`,\nTermOwner,\nnumChange as `#Changes`,\nstartDate[0] as `Creation Date`,\ncase when size(startDate) >1 then apoc.text.join(startDate[1..(size(startDate))],', ') else '' end as `Date of Change(s)`,\nretire_date as `Retire Date`,\ncase when not retire_date='' then 'retired' else 'active' end as Status\nreturn\nCodelist,\nCodelistOwner,\n`Codelist Name`,\n`Term C-code`,\n`Submission Value`,\nTermOwner,\n`#Changes`,\n`Creation Date`,\n`Date of Change(s)`,\n`Retire Date`,\nStatus ",
          "width": 24,
          "height": 6,
          "x": 0,
          "y": 4,
          "type": "table",
          "selection": {},
          "settings": {
            "compact": true,
            "wrapContent": true,
            "columnWidths": "[1,1,1,1,1.5,0.8,1,0.8,2,0.8,0.5]",
            "allowDownload": true,
            "refreshButtonEnabled": true,
            "actionsRules": [
              {
                "condition": "rowCheck",
                "field": "Submission Value",
                "value": "Submission Value",
                "customization": "set variable",
                "customizationValue": "subval"
              }
            ]
          }
        },
        {
          "id": "7869fc52-b2a1-4d35-b47c-89b48e964866",
          "title": "Pick a Codelist",
          "query": "MATCH (n:`CTCodelistAttributesValue`) \nWHERE toLower(toString(n.`name`)) CONTAINS toLower($input) \nRETURN DISTINCT n.`name` as value,  n.`name` as display ORDER BY size(toString(value)) ASC LIMIT 20",
          "width": 5,
          "height": 2,
          "x": 0,
          "y": 0,
          "type": "select",
          "selection": {},
          "settings": {
            "type": "Node Property",
            "entityType": "CTCodelistAttributesValue",
            "propertyType": "name",
            "propertyTypeDisplay": "name",
            "parameterName": "neodash_ctcodelistattributesvalue_name",
            "suggestionLimit": 20
          },
          "schema": []
        },
        {
          "id": "4f6dde88-b8e2-401d-b046-bbf293f3467a",
          "title": "Codelist Concept ID",
          "query": "MATCH (n1:CTCodelistAttributesValue)<-[r1:HAS_VERSION]-(n2:CTCodelistAttributesRoot)<-[r2]-(n3:CTCodelistRoot)\nWHERE n1.name=$neodash_ctcodelistattributesvalue_name\nRETURN n3.uid\n",
          "width": 5,
          "height": 2,
          "x": 0,
          "y": 2,
          "type": "value",
          "selection": {},
          "settings": {},
          "schema": []
        },
        {
          "id": "bf3d7781-3d3d-4be6-b6c4-5736a0b5a427",
          "title": "Details for Term(s): $neodash_subval",
          "query": "//codelist_term_history\nMATCH\n  (n1:CTCodelistAttributesValue)<-[r1:HAS_VERSION]-\n  (n2:CTCodelistAttributesRoot)<-[r2]-\n  (n3:CTCodelistRoot)<-[r5:HAS_SELECTED_CODELIST]-\n  (ct_context:CTTermContext)-[r5_1:HAS_SELECTED_TERM]->\n  (n6:CTTermRoot)-[r6:HAS_ATTRIBUTES_ROOT]->\n  (n7:CTTermAttributesRoot)-[r7:HAS_VERSION]->\n  (n8:CTTermAttributesValue),\n  (n6)<-[:HAS_TERM_ROOT]-(subm_val:CTCodelistTerm)\nWITH DISTINCT n1, r1, n2, r2, n3, r5, n6, r6, n7, r7, n8,subm_val\nWHERE n1.name = $neodash_ctcodelistattributesvalue_name\nAND subm_val.submission_value IN $neodash_subval\nWITH\n  CASE\n    WHEN n8.concept_id IS NULL THEN toString(elementId(n8))\n    ELSE n8.concept_id\n  END AS concept_id,\n  apoc.map.merge(\n    properties(n8),\n    apoc.map.fromValues([\n      'submission_value',\n       subm_val.submission_value,\n      'version',\n      r7.version,\n      'start_date',\n      r7.start_date,\n      'retire_date',\n      r5.end_date,\n      'end_date',\n      r7.end_date\n    ])\n  ) AS term\nORDER BY r7.version\nWITH concept_id, collect(term) AS terms\nWITH\n  concept_id,\n  CASE\n    WHEN size(terms) = 1 THEN [[null, terms[0]]]\n    ELSE apoc.coll.pairs(terms)\n  END AS terms\nWITH\n  concept_id,\n  CASE\n    WHEN size(terms) = 1 THEN terms\n    ELSE apoc.coll.insert(terms[0..size(terms) - 1], 0, [null, terms[0][0]])\n  END AS terms\nWITH\n  concept_id,\n  terms,\n  [\n    p IN terms\n    | CASE\n      WHEN\n        (p[0]['definition'] = p[1]['definition']) OR p[0]['definition'] IS NULL\n        THEN 'no'\n      ELSE 'yes'\n    END\n  ] AS def_diff,\n  [\n    p IN terms\n    | CASE\n      WHEN\n        (p[0]['submission_value'] = p[1]['submission_value']) OR\n        p[0]['submission_value'] IS NULL\n        THEN 'no'\n      ELSE 'yes'\n    END\n  ] AS subval_diff,\n  [\n    p IN terms\n    | CASE\n      WHEN\n        (p[0]['preferred_term'] = p[1]['preferred_term']) OR\n        p[0]['preferred_term'] IS NULL\n        THEN 'no'\n      ELSE 'yes'\n    END\n  ] AS pref_term_diff,\n  [\n    p IN terms\n    | CASE\n      WHEN\n        (p[0]['concept_id'] = p[1]['concept_id']) OR p[0]['concept_id'] IS NULL\n        THEN 'no'\n      ELSE 'yes'\n    END\n  ] AS concept_diff,\n  [\n    p IN terms\n    | CASE\n      WHEN\n        (p[0]['synonyms'] = p[1]['synonyms']) OR p[0]['synonyms'] IS NULL\n        THEN 'no'\n      ELSE 'yes'\n    END\n  ] AS sym_diff\nWITH\n  concept_id,\n  terms,\n  def_diff,\n  subval_diff,\n  pref_term_diff,\n  concept_diff,\n  sym_diff,\n  range(0, size(terms) - 1, 1) AS coll_size\nUNWIND coll_size AS idx\nWITH\n  concept_id,\n  terms[idx][1] AS term,\n  def_diff[idx] AS def_diff,\n  subval_diff[idx] AS subval_diff,\n  pref_term_diff[idx] AS pref_term_diff,\n  concept_diff[idx] AS concept_diff,\n  sym_diff[idx] AS sym_diff\nWITH\n  concept_id,\n  CASE\n    WHEN \"submission_value\" IN keys(term) THEN term.submission_value\n    ELSE null\n  END AS `Submission Value`,\n  CASE\n    WHEN 'concept_id' IN keys(term) THEN term.concept_id\n    ELSE null\n  END AS `C-code`,\n  CASE\n    WHEN \"preferred_term\" IN keys(term) THEN term.preferred_term\n    ELSE null\n  END AS `Preferred Term`,\n  CASE\n    WHEN \"synonyms\" IN keys(term) THEN term.synonyms\n    ELSE null\n  END AS Synonyms,\n  CASE\n    WHEN \"definition\" IN keys(term) THEN term.definition\n    ELSE null\n  END AS Definition,\n  CASE\n    WHEN\n      term.start_date IS NOT NULL\n      THEN apoc.temporal.format(term.start_date, \"YYYY-MM-dd\")\n    ELSE null\n  END AS `Start Date`,\n  CASE\n    WHEN\n      term.end_date IS NOT NULL\n      THEN apoc.temporal.format(term.end_date, \"YYYY-MM-dd\")\n    ELSE null\n  END AS end_date,\n  CASE\n    WHEN\n      term.retire_date IS NOT NULL\n      THEN apoc.temporal.format(term.retire_date, \"YYYY-MM-dd\")\n    ELSE null\n  END AS `Retire Date`,\n  term.version AS Version,\n  def_diff,\n  subval_diff,\n  pref_term_diff,\n  concept_diff,\n  sym_diff\nRETURN\n  `Start Date`,\n  coalesce(end_date, `Retire Date`) AS `End Date`,\n  Version,\n  `Submission Value`,\n  `C-code`,\n  `Preferred Term`,\n  Synonyms,\n  Definition,\n  subval_diff AS __subval_diff,\n  concept_diff AS __concept_diff,\n  pref_term_diff AS __pref_term_diff,\n  sym_diff AS __sym_diff,\n  def_diff AS __def_diff\nORDER BY concept_id, `Start Date`, `End Date`",
          "width": 23,
          "height": 6,
          "x": 0,
          "y": 15,
          "type": "table",
          "selection": {},
          "settings": {
            "refreshButtonEnabled": true,
            "compact": true,
            "wrapContent": true,
            "columnWidths": "[1,1,1,1,1,1,1,4]",
            "noDataMessage": "Select one or more terms in table above.",
            "actionsRules": [
              {
                "condition": "Click",
                "field": "",
                "value": "",
                "customization": "set variable",
                "customizationValue": ""
              }
            ],
            "styleRules": [
              {
                "field": "__subval_diff",
                "condition": "=",
                "value": "no",
                "customization": "cell color",
                "customizationValue": "#5FE8866E",
                "targetField": "Submission Value"
              },
              {
                "field": "__subval_diff",
                "condition": "=",
                "value": "yes",
                "customization": "cell color",
                "customizationValue": "#FF11116E",
                "targetField": "Submission Value"
              },
              {
                "field": "__concept_diff",
                "condition": "=",
                "value": "no",
                "customization": "cell color",
                "customizationValue": "#5FE8866E",
                "targetField": "C-code"
              },
              {
                "field": "__concept_diff",
                "condition": "=",
                "value": "yes",
                "customization": "cell color",
                "customizationValue": "#FF11116E",
                "targetField": "C-code"
              },
              {
                "field": "__pref_term_diff",
                "condition": "=",
                "value": "no",
                "customization": "cell color",
                "customizationValue": "#5FE8866E",
                "targetField": "Preferred Term"
              },
              {
                "field": "__pref_term_diff",
                "condition": "=",
                "value": "yes",
                "customization": "cell color",
                "customizationValue": "#FF11116E",
                "targetField": "Preferred Term"
              },
              {
                "field": "__sym_diff",
                "condition": "=",
                "value": "no",
                "customization": "cell color",
                "customizationValue": "#5FE8866E",
                "targetField": "Synonyms"
              },
              {
                "field": "__sym_diff",
                "condition": "=",
                "value": "yes",
                "customization": "cell color",
                "customizationValue": "#FF11116E",
                "targetField": "Synonyms"
              },
              {
                "field": "__def_diff",
                "condition": "=",
                "value": "no",
                "customization": "cell color",
                "customizationValue": "#5FE8866E",
                "targetField": "Definition"
              },
              {
                "field": "__def_diff",
                "condition": "=",
                "value": "yes",
                "customization": "cell color",
                "customizationValue": "#FF11116E",
                "targetField": "Definition"
              }
            ]
          }
        },
        {
          "id": "40057aeb-f904-4108-9f7b-ea6330b9cff1",
          "title": "Select CT Package",
          "query": "MATCH\n  (n1:CTCodelistAttributesValue)<-[r1:HAS_VERSION]-\n  (n2:CTCodelistAttributesRoot)<-[r2]-\n  (n3:CTCodelistRoot),\n  (n3)<-[r11:HAS_CODELIST]-\n  (catalogue:CTCatalogue)\nOPTIONAL MATCH (catalogue)-[r12:CONTAINS_PACKAGE]->\n  (package:CTPackage)-[r13:CONTAINS_CODELIST]->\n  (cl_package:CTPackageCodelist)-[r14:CONTAINS_ATTRIBUTES]->\n  (n1)\nWITH DISTINCT n1, r1, catalogue, package\nWHERE n1.name = $neodash_ctcodelistattributesvalue_name\nRETURN  \ncatalogue.name as `CT Type`,\npackage.name as Package,\nn1.name AS Codelist,\nr1.version as Version,\nCASE WHEN r1.end_date is not null THEN apoc.text.join([apoc.temporal.format(r1.start_date,\"YYYY-MM-dd\"), apoc.temporal.format(r1.end_date,\"YYYY-MM-dd\")],'') ELSE apoc.text.join([apoc.temporal.format(r1.start_date,\"YYYY-MM-dd\"), ''],'-') END as Date,\nelementId(n1) as __id\n order by `CT Type`, Package DESC , Version DESC\n",
          "width": 8,
          "height": 4,
          "x": 16,
          "y": 0,
          "type": "table",
          "selection": {},
          "settings": {
            "actionsRules": [
              {
                "condition": "Click",
                "field": "Version",
                "value": "Version",
                "customization": "set variable",
                "customizationValue": "cl_id"
              },
              {
                "condition": "Click",
                "field": "Version",
                "value": "Package",
                "customization": "set variable",
                "customizationValue": "pck_date"
              }
            ],
            "refreshButtonEnabled": true,
            "compact": true,
            "wrapContent": true
          }
        }
      ]
    }
  ],
  "parameters": {},
  "extensions": {
    "active": true,
    "activeReducers": [],
    "advanced-charts": {
      "active": true
    },
    "actions": {
      "active": true
    },
    "styling": {
      "active": true
    },
    "forms": {
      "active": true
    }
  },
  "uuid": "6939741f-43c7-4099-ace0-51e3b1b9820b"
}